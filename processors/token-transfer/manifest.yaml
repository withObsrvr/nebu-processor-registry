name: stellar/token-transfer
version: 0.1.0
type: origin

display_name: Stellar Token Transfer Processor
description: |
  Origin processor that extracts token transfer events from Stellar ledgers.
  Wraps Stellar's official token_transfer.EventsProcessor to emit structured events
  for transfers, mints, burns, clawbacks, and fees.

proto:
  input: xdr.LedgerCloseMeta
  output: token_transfer.TokenTransferEvent

requires:
  stellar_protocol: ">=23"
  network: "public, testnet"

events:
  - transfer: Token transfers between accounts
  - mint: Token minting events
  - burn: Token burning events
  - clawback: Token clawback events
  - fee: Transaction fee events

usage:
  go: |
    import (
        "github.com/stellar/go-stellar-sdk/network"
        "github.com/withObsrvr/nebu/processors/core/token_transfer"
        "github.com/withObsrvr/nebu/pkg/runtime"
        "github.com/withObsrvr/nebu/pkg/source"
    )

    src, _ := source.NewRPCLedgerSource("https://archive-rpc.lightsail.network")
    origin := token_transfer.NewOrigin(network.PublicNetworkPassphrase)
    rt := runtime.NewRuntime()
    rt.RunOrigin(ctx, src, origin, 60200000, 60200100)

  http: |
    # Start the daemon
    nebu-ttpd

    # Stream events
    curl "http://localhost:8080/events?start=60200000&end=60200100"

maintainer:
  name: OBSRVR
  url: https://withobsrvr.com
  contact: support@withobsrvr.com

repository: https://github.com/withObsrvr/nebu

license: MIT
